<!DOCTYPE html>
<html lang="vi">
<head>
<meta charset="UTF-8">
<title>Dream League 2026 Mobile</title>
<meta name="viewport" content="width=device-width,initial-scale=1,user-scalable=no">
<link rel="manifest" href="data:application/json,{
  &quot;name&quot;:&quot;Dream League 2026&quot;,
  &quot;short_name&quot;:&quot;DLS26&quot;,
  &quot;start_url&quot;:&quot;.&quot;,
  &quot;display&quot;:&quot;standalone&quot;,
  &quot;background_color&quot;:&quot;#000&quot;,
  &quot;theme_color&quot;:&quot;#00c853&quot;
}">
<style>
*{margin:0;padding:0;box-sizing:border-box;touch-action:none}
body{overflow:hidden;background:#000;font-family:Arial}
#menu{position:fixed;inset:0;background:linear-gradient(#0a7,#032);
display:flex;flex-direction:column;justify-content:center;align-items:center;
gap:14px;color:#fff}
#menu button{width:220px;height:50px;font-size:18px;border-radius:14px;
border:none;background:#00c853;color:#fff}
#hud,#commentary{position:fixed;left:50%;transform:translateX(-50%);
background:rgba(0,0,0,.6);color:#fff;border-radius:10px;padding:6px 16px}
#hud{top:10px}
#commentary{top:48px;font-size:14px}
#joystick{position:fixed;bottom:20px;left:20px;width:120px;height:120px;
border-radius:50%;background:rgba(255,255,255,.15)}
#stick{position:absolute;left:40px;top:40px;width:40px;height:40px;
border-radius:50%;background:rgba(255,255,255,.6)}
#buttons{position:fixed;bottom:20px;right:20px;display:flex;
flex-direction:column;gap:10px}
#buttons button{width:90px;height:50px;border-radius:14px;border:none;
background:#00c853;color:#fff;font-weight:bold}
</style>
</head>
<body>

<div id="menu">
  <h1>DREAM LEAGUE 2026</h1>
  <button onclick="startGame()">‚ñ∂ PLAY</button>
  <button onclick="openPack()">üÉè OPEN PACK</button>
  <button onclick="openMarket()">üîÅ TRANSFER</button>
  <button onclick="openTraining()">üèãÔ∏è TRAINING</button>
</div>

<div id="hud">0 - 0</div>
<div id="commentary">Kick Off!</div>

<div id="joystick"><div id="stick"></div></div>
<div id="buttons">
  <button onclick="passBall()">PASS</button>
  <button onclick="shoot()">SHOOT</button>
</div>

<audio id="kick" src="https://cdn.pixabay.com/audio/2022/03/15/audio_2c3f6ef6cc.mp3"></audio>
<audio id="goal" src="https://cdn.pixabay.com/audio/2022/03/10/audio_6f4c3a2f0f.mp3"></audio>

<script src="https://cdn.jsdelivr.net/npm/three@0.152.2/build/three.min.js"></script>
<script>
/* ========= SAVE ========= */
let save = JSON.parse(localStorage.getItem("career")) || {
 coins:0, team:[], league:{match:0,points:0}
};
const saveGame=()=>localStorage.setItem("career",JSON.stringify(save));

/* ========= UI ========= */
const say=t=>commentary.innerText=t;

/* ========= GACHA ========= */
function openPack(){
 const p={name:"Player "+(save.team.length+1),
 atk:50+Math.random()*40|0,
 spd:50+Math.random()*40|0,
 def:50+Math.random()*40|0};
 save.team.push(p); saveGame();
 alert("You got "+p.name);
}

/* ========= TRANSFER ========= */
function openMarket(){
 let price=300+Math.random()*300|0;
 let p={name:"Market Player",atk:60+Math.random()*30|0,
 spd:60+Math.random()*30|0,def:60+Math.random()*30|0,price};
 if(confirm(`${p.name}\nATK:${p.atk} SPD:${p.spd} DEF:${p.def}\nPrice:${price}`)){
  if(save.coins>=price){
   save.coins-=price; save.team.push(p); saveGame();
   alert("Signed!");
  } else alert("Not enough coins");
 }
}

/* ========= TRAIN ========= */
function openTraining(){
 if(!save.team.length) return alert("No player!");
 if(save.coins<50) return alert("Not enough coins");
 save.coins-=50; save.team[0].atk+=5;
 saveGame(); alert("Training success!");
}

/* ========= GAME CORE ========= */
let scene,camera,renderer,player,goalie,ball,enemy=[],fakePlayers=[];
let scoreA=0,scoreB=0,playing=false;

function startGame(){
 menu.style.display="none";
 init(); playing=true; animate();
}

function makePlayer(color,x,z){
 let m=new THREE.Mesh(
 new THREE.CapsuleGeometry(.6,1.6,4,8),
 new THREE.MeshStandardMaterial({color}));
 m.position.set(x,1,z); return m;
}

function init(){
 scene=new THREE.Scene();
 scene.background=new THREE.Color(0x1b5e20);
 camera=new THREE.PerspectiveCamera(65,innerWidth/innerHeight,.1,1000);
 camera.position.set(0,18,22);
 renderer=new THREE.WebGLRenderer({antialias:true});
 renderer.setSize(innerWidth,innerHeight);
 document.body.appendChild(renderer.domElement);

 scene.add(new THREE.AmbientLight(0xffffff,.6));
 let sun=new THREE.DirectionalLight(0xffffff,.8);
 sun.position.set(30,50,30); scene.add(sun);

 let field=new THREE.Mesh(
 new THREE.PlaneGeometry(60,38),
 new THREE.MeshStandardMaterial({color:0x2e7d32}));
 field.rotation.x=-Math.PI/2; scene.add(field);

 goalie=makePlayer(0xffeb3b,0,-16); scene.add(goalie);
 player=makePlayer(0x2196f3,0,10); scene.add(player);

 for(let i=0;i<3;i++){
  let e=makePlayer(0xf44336,-6+i*6,-6);
  enemy.push(e); scene.add(e);
 }

 for(let i=0;i<6;i++){
  let f=makePlayer(0x1565c0,-20+i*7,0);
  fakePlayers.push(f); scene.add(f);
 }

 ball=new THREE.Mesh(
 new THREE.SphereGeometry(.35,16,16),
 new THREE.MeshStandardMaterial({color:0xffffff}));
 ball.position.set(0,.35,8);
 ball.userData={vx:0,vz:0};
 scene.add(ball);
}

/* ========= JOYSTICK ========= */
let joy={x:0,y:0};
joystick.ontouchmove=e=>{
 let r=joystick.getBoundingClientRect(),t=e.touches[0];
 let dx=t.clientX-r.left-60,dy=t.clientY-r.top-60;
 let d=Math.min(40,Math.hypot(dx,dy)),a=Math.atan2(dy,dx);
 joy.x=Math.cos(a)*(d/40); joy.y=Math.sin(a)*(d/40);
 stick.style.transform=`translate(${joy.x*40}px,${joy.y*40}px)`;
};
joystick.ontouchend=()=>{joy.x=joy.y=0;stick.style.transform="translate(0,0)"};

/* ========= ACTION ========= */
function shoot(){kick.play(); ball.userData.vz=-1;}
function passBall(){kick.play(); ball.userData.vx=(Math.random()-.5);}

/* ========= LOOP ========= */
function animate(){
 if(!playing) return;
 requestAnimationFrame(animate);

 player.position.x+=joy.x*.25;
 player.position.z+=joy.y*.25;
 ball.position.x+=(player.position.x-ball.position.x)*.1;
 ball.position.z+=(player.position.z-2-ball.position.z)*.1;
 ball.position.x+=ball.userData.vx;
 ball.position.z+=ball.userData.vz;
 ball.userData.vx*=.94; ball.userData.vz*=.94;

 goalie.position.x+=(ball.position.x-goalie.position.x)*.12;
 enemy.forEach(e=>{
  e.position.x+=(ball.position.x-e.position.x)*.03;
  e.position.z+=(ball.position.z-e.position.z)*.03;
 });
 fakePlayers.forEach(p=>{
  p.position.z+=Math.sin(Date.now()/800+p.position.x)*.01;
 });

 if(ball.position.z<-18 && Math.abs(ball.position.x)<4){
  scoreA++; hud.innerText=scoreA+" - "+scoreB;
  save.coins+=100; saveGame();
  goal.play(); navigator.vibrate?.(200);
  say("GOOOOOAL!!!");
  ball.position.set(0,.35,8);
 }

 camera.position.x=player.position.x;
 camera.position.z=player.position.z+22;
 camera.lookAt(player.position.x,1,player.position.z-5);
 renderer.render(scene,camera);
}
</script>
</body>
</html>
